# Uniswap V3 æ·»åŠ æµåŠ¨æ€§å¼¹çª—è®¾è®¡æ–¹æ¡ˆ

## ğŸ“‹ è®¾è®¡æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è®¾è®¡äº†ç”¨äº pools é¡µé¢çš„ Uniswap V3 æ·»åŠ æµåŠ¨æ€§å¼¹çª—ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç•Œé¢ã€äº¤äº’æµç¨‹ã€æŠ€æœ¯å®ç°å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–ã€‚

## ğŸ¯ è®¾è®¡ç›®æ ‡

### ç”¨æˆ·ä½“éªŒç›®æ ‡
- âœ… **ç®€åŒ–æ“ä½œ**: ä¸€ç«™å¼æ·»åŠ æµåŠ¨æ€§ï¼Œè‡ªåŠ¨å¤„ç†å¤æ‚æµç¨‹
- âœ… **å®æ—¶åé¦ˆ**: æ˜¾ç¤ºä»·æ ¼ã€æ»‘ç‚¹ã€è´¹ç”¨ç­‰å…³é”®ä¿¡æ¯
- âœ… **å®‰å…¨ä¿æŠ¤**: æ»‘ç‚¹ä¿æŠ¤ã€ä½™é¢æ£€æŸ¥ã€æˆæƒç®¡ç†
- âœ… **è§†è§‰æ¸…æ™°**: ç°ä»£åŒ– UI è®¾è®¡ï¼Œä¿¡æ¯å±‚æ¬¡åˆ†æ˜

### åŠŸèƒ½ç›®æ ‡
- âœ… **ä»£å¸é€‰æ‹©**: æ”¯æŒ USDT/WETH äº¤æ˜“å¯¹
- âœ… **æ•°é‡è¾“å…¥**: æ™ºèƒ½è®¡ç®—é…å¯¹æ•°é‡
- âœ… **ä»·æ ¼åŒºé—´**: ç›´è§‚çš„ tick range è®¾ç½®
- âœ… **è´¹ç”¨è®¾ç½®**: çµæ´»çš„æ»‘ç‚¹å’Œæ‰‹ç»­è´¹é…ç½®
- âœ… **æˆæƒç®¡ç†**: è‡ªåŠ¨æ£€æµ‹å’Œå¤„ç†ä»£å¸æˆæƒ

## ğŸ¨ UI è®¾è®¡æ–¹æ¡ˆ

### 1. å¼¹çª—å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ·»åŠ æµåŠ¨æ€§                    [âœ•]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  ğŸ¯ é€‰æ‹©ä»£å¸å¯¹                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚    USDT     â”‚     WETH    â”‚          â”‚
â”‚  â”‚   1,000.00  â”‚     0.50    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                         â”‚
â”‚  ğŸ“Š ä»·æ ¼åŒºé—´è®¾ç½®                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å½“å‰ä»·æ ¼: $2,000.00              â”‚  â”‚
â”‚  â”‚  ä»·æ ¼åŒºé—´: [$1,800 - $2,200]      â”‚  â”‚
â”‚  â”‚  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“      â”‚  â”‚
â”‚  â”‚  [çª„å¹…] [æ ‡å‡†] [å®½å¹…] [è‡ªå®šä¹‰]      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  âš™ï¸ è´¹ç”¨è®¾ç½®                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ»‘ç‚¹å®¹å¿åº¦: 1.0%                   â”‚  â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%                   â”‚  â”‚
â”‚  â”‚                                    â”‚  â”‚
â”‚  â”‚  é¢„ä¼°è´¹ç”¨: 0.005 ETH                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  ğŸ’° æ±‡æ€»ä¿¡æ¯                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  USDT æŠ•å…¥: 1,000.00               â”‚  â”‚
â”‚  â”‚  WETH æŠ•å…¥: 0.50                   â”‚  â”‚
â”‚  â”‚  æœ€å° USDT: 990.00 (1% æ»‘ç‚¹)       â”‚  â”‚
â”‚  â”‚  æœ€å° WETH: 0.495 (1% æ»‘ç‚¹)       â”‚  â”‚
â”‚  â”‚                                    â”‚  â”‚
â”‚  â”‚  æˆæƒçŠ¶æ€: âœ…USDT âœ…WETH           â”‚  â”‚
â”‚  â”‚  é¢„ä¼°æ”¶ç›Š: 8.92% APY                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  [å–æ¶ˆ]              [æ·»åŠ æµåŠ¨æ€§]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. è§†è§‰è®¾è®¡è§„èŒƒ

#### é…è‰²æ–¹æ¡ˆ
```css
/* ä¸»è‰²è°ƒ */
--primary-gradient: linear-gradient(135deg, #FF6B6B, #4ECDC4);
--secondary-color: #2C3E50;
--accent-color: #E74C3C;

/* çŠ¶æ€è‰²å½© */
--success-color: #27AE60;
--warning-color: #F39C12;
--error-color: #E74C3C;
--info-color: #3498DB;

/* èƒŒæ™¯è‰² */
--modal-bg: rgba(15, 15, 15, 0.95);
--card-bg: #1a1a1a;
--input-bg: #2d2d2d;
--border-color: #3d3d3d;
```

#### ç»„ä»¶æ ·å¼
```css
/* å¼¹çª—å®¹å™¨ */
.liquidity-modal {
  background: var(--modal-bg);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border-color);
  border-radius: 16px;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

/* è¾“å…¥æ¡† */
.token-input {
  background: var(--input-bg);
  border: 2px solid var(--border-color);
  border-radius: 12px;
  padding: 16px;
  transition: all 0.3s ease;
}

.token-input:focus {
  border-color: var(--accent-color);
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
}

/* æŒ‰é’® */
.primary-button {
  background: var(--primary-gradient);
  border: none;
  border-radius: 12px;
  padding: 14px 24px;
  font-weight: 600;
  transition: all 0.3s ease;
}

.primary-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
}

/* ä»·æ ¼åŒºé—´æ»‘å— */
.price-range-slider {
  background: linear-gradient(
    90deg,
    #3498DB 0%,
    #2ECC71 25%,
    #F39C12 50%,
    #E74C3C 75%,
    #9B59B6 100%
  );
  height: 6px;
  border-radius: 3px;
  position: relative;
}
```

## ğŸ”§ æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 1. ç»„ä»¶ç»“æ„

```typescript
// ä¸»å¼¹çª—ç»„ä»¶
interface UniswapLiquidityModalProps {
  isOpen: boolean;
  onClose: () => void;
  onSuccess?: (result: LiquidityResult) => void;
  defaultToken0?: Address;
  defaultToken1?: Address;
}

// å­ç»„ä»¶ç»“æ„
â”œâ”€â”€ UniswapLiquidityModal          // ä¸»å¼¹çª—
â”œâ”€â”€ TokenSelector                  // ä»£å¸é€‰æ‹©å™¨
â”œâ”€â”€ AmountInputs                   // æ•°é‡è¾“å…¥ç»„ä»¶
â”œâ”€â”€ PriceRangeSelector            // ä»·æ ¼åŒºé—´é€‰æ‹©å™¨
â”œâ”€â”€ FeeSettings                   // è´¹ç”¨è®¾ç½®ç»„ä»¶
â”œâ”€â”€ ApprovalStatus                 // æˆæƒçŠ¶æ€ç»„ä»¶
â”œâ”€â”€ SummaryInfo                   // æ±‡æ€»ä¿¡æ¯ç»„ä»¶
â””â”€â”€ TransactionProgress           // äº¤æ˜“è¿›åº¦ç»„ä»¶
```

### 2. çŠ¶æ€ç®¡ç†

```typescript
interface LiquidityModalState {
  // ä»£å¸çŠ¶æ€
  token0: TokenInfo;
  token1: TokenInfo;

  // æ•°é‡çŠ¶æ€
  amount0: string;
  amount1: string;
  amount0Min: string;
  amount1Min: string;

  // ä»·æ ¼åŒºé—´çŠ¶æ€
  priceRange: {
    tickLower: number;
    tickUpper: number;
    type: 'narrow' | 'standard' | 'wide' | 'custom';
  };

  // è´¹ç”¨è®¾ç½®
  slippage: number;
  deadline: number;

  // æˆæƒçŠ¶æ€
  approvals: {
    token0: boolean;
    token1: boolean;
    nft: boolean;
  };

  // äº¤æ˜“çŠ¶æ€
  isApproving: boolean;
  isAddingLiquidity: boolean;
  transactionHash?: string;

  // é”™è¯¯çŠ¶æ€
  error: string | null;
  warnings: string[];
}
```

### 3. æ ¸å¿ƒåŠŸèƒ½å®ç°

#### ä»£å¸é€‰æ‹©å™¨
```typescript
const TokenSelector: React.FC<TokenSelectorProps> = ({
  selectedToken,
  onSelect,
  disabled,
  tokenType
}) => {
  const { formattedBalances } = useUniswapTokens();

  return (
    <div className="token-selector">
      <div className="token-icon">
        <img src={selectedToken.icon} alt={selectedToken.symbol} />
      </div>
      <div className="token-info">
        <div className="token-symbol">{selectedToken.symbol}</div>
        <div className="token-balance">
          ä½™é¢: {formattedBalances[`${tokenType}Balance`]}
        </div>
      </div>
      {!disabled && (
        <button onClick={() => onSelect(tokenType)}>
          <SwapIcon />
        </button>
      )}
    </div>
  );
};
```

#### æ™ºèƒ½æ•°é‡è®¡ç®—
```typescript
const useLiquidityCalculation = (token0, token1, currentPrice) => {
  const calculateAmount1 = useCallback((amount0: string) => {
    const amount0BN = parseUnits(amount0, token0.decimals);
    const amount1BN = (amount0BN * BigInt(Math.floor(currentPrice * 1e18))) / BigInt(1e18);
    return formatUnits(amount1BN, token1.decimals);
  }, [token0, token1, currentPrice]);

  const calculateAmount0 = useCallback((amount1: string) => {
    const amount1BN = parseUnits(amount1, token1.decimals);
    const amount0BN = (amount1BN * BigInt(1e18)) / BigInt(Math.floor(currentPrice * 1e18));
    return formatUnits(amount0BN, token0.decimals);
  }, [token0, token1, currentPrice]);

  return { calculateAmount1, calculateAmount0 };
};
```

#### ä»·æ ¼åŒºé—´é€‰æ‹©å™¨
```typescript
const PriceRangeSelector: React.FC = () => {
  const [selectedRange, setSelectedRange] = useState<RangeType>('standard');
  const [customRange, setCustomRange] = useState({ lower: -60000, upper: 60000 });

  const rangePresets = {
    narrow: { lower: -3000, upper: 3000, width: 'Â±0.1%' },
    standard: { lower: -60000, upper: 60000, width: 'Â±2%' },
    wide: { lower: -120000, upper: 120000, width: 'Â±4%' },
    custom: { lower: customRange.lower, upper: customRange.upper, width: 'è‡ªå®šä¹‰' }
  };

  return (
    <div className="price-range-selector">
      <div className="current-price">
        å½“å‰ä»·æ ¼: ${currentPrice.toFixed(2)}
      </div>

      <div className="range-presets">
        {Object.entries(rangePresets).map(([type, preset]) => (
          <button
            key={type}
            className={`preset-button ${selectedRange === type ? 'active' : ''}`}
            onClick={() => setSelectedRange(type as RangeType)}
          >
            {type === 'narrow' && 'çª„å¹…'}
            {type === 'standard' && 'æ ‡å‡†'}
            {type === 'wide' && 'å®½å¹…'}
            {type === 'custom' && 'è‡ªå®šä¹‰'}
            <span className="range-width">{preset.width}</span>
          </button>
        ))}
      </div>

      {selectedRange === 'custom' && (
        <div className="custom-range-inputs">
          <div className="tick-input">
            <label>Tick ä¸‹é™</label>
            <input
              type="number"
              value={customRange.lower}
              onChange={(e) => setCustomRange({...customRange, lower: Number(e.target.value)})}
            />
          </div>
          <div className="tick-input">
            <label>Tick ä¸Šé™</label>
            <input
              type="number"
              value={customRange.upper}
              onChange={(e) => setCustomRange({...customRange, upper: Number(e.target.value)})}
            />
          </div>
        </div>
      )}

      <div className="price-range-visualization">
        <PriceRangeChart
          currentPrice={currentPrice}
          range={rangePresets[selectedRange]}
        />
      </div>
    </div>
  );
};
```

## ğŸ”„ äº¤äº’æµç¨‹è®¾è®¡

### 1. ä¸»è¦æµç¨‹å›¾

```mermaid
graph TD
    A[ç”¨æˆ·ç‚¹å‡»æ·»åŠ æµåŠ¨æ€§] --> B{æ£€æŸ¥é’±åŒ…è¿æ¥}
    B -->|æœªè¿æ¥| C[æ˜¾ç¤ºè¿æ¥é’±åŒ…æç¤º]
    B -->|å·²è¿æ¥| D[æ˜¾ç¤ºå¼¹çª—]

    D --> E{é€‰æ‹©ä»£å¸å¯¹}
    E --> F[è¾“å…¥ä»£å¸æ•°é‡]

    F --> G{è‡ªåŠ¨è®¡ç®—é…å¯¹æ•°é‡}
    G --> H[è®¾ç½®ä»·æ ¼åŒºé—´]

    H --> I[è®¾ç½®æ»‘ç‚¹å’Œè´¹ç”¨]
    I --> J{æ£€æŸ¥æˆæƒçŠ¶æ€}

    J -->|éœ€è¦æˆæƒ| K[æ‰§è¡Œæˆæƒæµç¨‹]
    J -->|å·²æˆæƒ| L[æ˜¾ç¤ºç¡®è®¤ä¿¡æ¯]

    K --> M{æˆæƒæˆåŠŸ?}
    M -->|å¤±è´¥| N[æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯]
    M -->|æˆåŠŸ| L

    L --> O[æ‰§è¡Œæ·»åŠ æµåŠ¨æ€§]
    O --> P{äº¤æ˜“æˆåŠŸ?}

    P -->|å¤±è´¥| N
    P -->|æˆåŠŸ| Q[æ˜¾ç¤ºæˆåŠŸä¿¡æ¯]
    Q --> R[å…³é—­å¼¹çª—]
```

### 2. æˆæƒå¤„ç†æµç¨‹

```mermaid
graph TD
    A[æ£€æŸ¥æˆæƒçŠ¶æ€] --> B{éœ€è¦æˆæƒ?}
    B -->|ä¸éœ€è¦| C[ç»§ç»­ä¸‹ä¸€æ­¥]
    B -->|éœ€è¦| D[æ˜¾ç¤ºæˆæƒæŒ‰é’®]

    D --> E[ç”¨æˆ·ç‚¹å‡»æˆæƒ]
    E --> F[è°ƒç”¨æˆæƒåˆçº¦]
    F --> G{æˆæƒæˆåŠŸ?}

    G -->|æˆåŠŸ| H[æ›´æ–°æˆæƒçŠ¶æ€]
    G -->|å¤±è´¥| I[æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯]

    H --> J{è¿˜æœ‰ä»£å¸éœ€è¦æˆæƒ?}
    J -->|æ˜¯| D
    J -->|å¦| C

    I --> K[é‡è¯•æˆæƒ]
    K --> F
```

### 3. é”™è¯¯å¤„ç†æµç¨‹

```mermaid
graph TD
    A[æ“ä½œæ‰§è¡Œ] --> B{å‘ç”Ÿé”™è¯¯?}
    B -->|å¦| C[ç»§ç»­æ‰§è¡Œ]
    B -->|æ˜¯| D[åˆ†æé”™è¯¯ç±»å‹]

    D --> E{ä½™é¢ä¸è¶³?}
    E -->|æ˜¯| F[æ˜¾ç¤ºä½™é¢ä¸è¶³æç¤º]
    E -->|å¦| G{æˆæƒä¸è¶³?}

    G -->|æ˜¯| H[æ˜¾ç¤ºæˆæƒæç¤º]
    G -->|å¦| I{æ»‘ç‚¹è¿‡å¤§?}

    I -->|æ˜¯| J[æ˜¾ç¤ºæ»‘ç‚¹è­¦å‘Š]
    I -->|å¦| K{ç½‘ç»œé”™è¯¯?}

    K -->|æ˜¯| L[æ˜¾ç¤ºç½‘ç»œé”™è¯¯]
    K -->|å¦| M[æ˜¾ç¤ºé€šç”¨é”™è¯¯]

    F --> N[æä¾›å¢åŠ ä½™é¢é€‰é¡¹]
    H --> O[æä¾›æˆæƒæŒ‰é’®]
    J --> P[è°ƒæ•´æ»‘ç‚¹è®¾ç½®]
    L --> Q[é‡è¯•é€‰é¡¹]
    M --> R[è”ç³»æ”¯æŒé€‰é¡¹]
```

## ğŸ“± å“åº”å¼è®¾è®¡

### æ¡Œé¢ç«¯ (â‰¥1024px)
- å¼¹çª—å®½åº¦: 640px
- ä¸¤åˆ—å¸ƒå±€ä»£å¸è¾“å…¥
- å®Œæ•´çš„ä»·æ ¼åŒºé—´å¯è§†åŒ–
- ä¾§è¾¹è¯¦æƒ…é¢æ¿

### å¹³æ¿ç«¯ (768px - 1023px)
- å¼¹çª—å®½åº¦: 90vw (æœ€å¤§ 640px)
- å•åˆ—å¸ƒå±€
- ç®€åŒ–çš„ä»·æ ¼åŒºé—´é€‰æ‹©
- æŠ˜å å¼è¯¦æƒ…ä¿¡æ¯

### ç§»åŠ¨ç«¯ (<768px)
- å¼¹çª—å®½åº¦: 95vw
- å‚ç›´å †å å¸ƒå±€
- ç®€åŒ–ç‰ˆä»·æ ¼åŒºé—´é€‰æ‹©
- åº•éƒ¨å›ºå®šæ“ä½œæŒ‰é’®

## ğŸ” ç»†èŠ‚äº¤äº’è®¾è®¡

### 1. å®æ—¶ä»·æ ¼æ›´æ–°
```typescript
// æ¯5ç§’æ›´æ–°ä¸€æ¬¡ä»·æ ¼
useEffect(() => {
  const interval = setInterval(async () => {
    const newPrice = await getCurrentPrice(token0, token1);
    setCurrentPrice(newPrice);

    // å¦‚æœç”¨æˆ·å·²è¾“å…¥æ•°é‡ï¼Œé‡æ–°è®¡ç®—é…å¯¹æ•°é‡
    if (amount0) {
      setAmount1(calculateAmount1(amount0, newPrice));
    }
  }, 5000);

  return () => clearInterval(interval);
}, [token0, token1, amount0]);
```

### 2. æ™ºèƒ½æ»‘ç‚¹å»ºè®®
```typescript
const suggestSlippage = (pairVolatility: number, tradeSize: number) => {
  if (pairVolatility < 0.02 && tradeSize < 1000) return 0.5;  // ä½æ³¢åŠ¨ï¼Œå°é¢äº¤æ˜“
  if (pairVolatility < 0.05 && tradeSize < 5000) return 1.0;  // ä¸­ç­‰æ³¢åŠ¨
  return 2.0;  // é«˜æ³¢åŠ¨æˆ–å¤§é¢äº¤æ˜“
};
```

### 3. Gas è´¹ç”¨ä¼°ç®—
```typescript
const estimateGasFee = async (params: LiquidityParams) => {
  try {
    const estimate = await uniswapContract.estimateGas.addLiquidity(params);
    const 
     = await provider.getGasPrice();

    return {
      gas: estimate,
      gasPrice,
      totalFee: estimate * gasPrice,
      totalFeeETH: formatEther(estimate * gasPrice)
    };
  } catch (error) {
    console.error('Gas ä¼°ç®—å¤±è´¥:', error);
    return null;
  }
};
```

## ğŸ¯ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### 1. æ¸è¿›å¼ä¿¡æ¯æŠ«éœ²
- **æ–°æ‰‹æ¨¡å¼**: éšè—é«˜çº§é€‰é¡¹ï¼Œæä¾›é¢„è®¾é…ç½®
- **æ ‡å‡†æ¨¡å¼**: æ˜¾ç¤ºå¸¸ç”¨é€‰é¡¹ï¼Œå…è®¸è‡ªå®šä¹‰
- **ä¸“å®¶æ¨¡å¼**: æ˜¾ç¤ºæ‰€æœ‰å‚æ•°ï¼Œå®Œå…¨è‡ªå®šä¹‰

### 2. æ™ºèƒ½æç¤ºç³»ç»Ÿ
- **ä½™é¢è­¦å‘Š**: å½“è¾“å…¥é‡‘é¢è¶…è¿‡å¯ç”¨ä½™é¢
- **ä»·æ ¼æç¤º**: å½“ä»·æ ¼åç¦»å¸‚åœºä»·è¿‡å¤š
- **è´¹ç”¨æé†’**: å½“æ»‘ç‚¹æˆ– gas è´¹ç”¨è¿‡é«˜

### 3. æ“ä½œåé¦ˆ
- **åŠ è½½çŠ¶æ€**: æ¸…æ™°çš„è¿›åº¦æŒ‡ç¤º
- **æˆåŠŸç¡®è®¤**: äº¤æ˜“æˆåŠŸçš„è¯¦ç»†åé¦ˆ
- **é”™è¯¯æŒ‡å¯¼**: å…·ä½“çš„é”™è¯¯åŸå› å’Œè§£å†³æ–¹æ¡ˆ

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### 1. å•å…ƒæµ‹è¯•
```typescript
describe('UniswapLiquidityModal', () => {
  it('should calculate correct paired amounts', () => {
    // æµ‹è¯•ä»£å¸é…å¯¹æ•°é‡è®¡ç®—
  });

  it('should handle slippage calculation', () => {
    // æµ‹è¯•æ»‘ç‚¹è®¡ç®—
  });

  it('should validate input amounts', () => {
    // æµ‹è¯•è¾“å…¥éªŒè¯
  });
});
```

### 2. é›†æˆæµ‹è¯•
```typescript
describe('Liquidity Modal Integration', () => {
  it('should complete full liquidity flow', async () => {
    // æµ‹è¯•å®Œæ•´çš„æ·»åŠ æµåŠ¨æ€§æµç¨‹
  });

  it('should handle approval flow', async () => {
    // æµ‹è¯•æˆæƒæµç¨‹
  });
});
```

### 3. E2E æµ‹è¯•
```typescript
describe('E2E Liquidity Modal', () => {
  it('should allow user to add liquidity from start to finish', async () => {
    // ç«¯åˆ°ç«¯æµ‹è¯•
  });
});
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. ç»„ä»¶ä¼˜åŒ–
- ä½¿ç”¨ `React.memo` é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- å®ç°è™šæ‹Ÿæ»šåŠ¨å¤„ç†å¤§é‡æ•°æ®
- ä½¿ç”¨ `useCallback` ç¼“å­˜äº‹ä»¶å¤„ç†å‡½æ•°

### 2. æ•°æ®ä¼˜åŒ–
- å®ç°æ™ºèƒ½ç¼“å­˜å‡å°‘ API è°ƒç”¨
- ä½¿ç”¨é˜²æŠ–å¤„ç†é¢‘ç¹çš„è¾“å…¥å˜åŒ–
- é¢„åŠ è½½å¸¸ç”¨æ•°æ®æé«˜å“åº”é€Ÿåº¦

### 3. åŠ¨ç”»ä¼˜åŒ–
- ä½¿ç”¨ CSS transform è€Œä¸æ˜¯ position
- å®ç°ç¡¬ä»¶åŠ é€Ÿ
- åˆç†ä½¿ç”¨åŠ¨ç”»å‡å°‘æ€§èƒ½å½±å“

## ğŸš€ å®ç°ä¼˜å…ˆçº§

### Phase 1: æ ¸å¿ƒåŠŸèƒ½ (MVP)
- [ ] åŸºç¡€å¼¹çª—ç»“æ„
- [ ] ä»£å¸é€‰æ‹©å’Œæ•°é‡è¾“å…¥
- [ ] ä»·æ ¼åŒºé—´é€‰æ‹© (é¢„è®¾é€‰é¡¹)
- [ ] æˆæƒçŠ¶æ€æ£€æŸ¥å’Œå¤„ç†
- [ ] åŸºç¡€æ·»åŠ æµåŠ¨æ€§åŠŸèƒ½

### Phase 2: ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- [ ] å®æ—¶ä»·æ ¼æ›´æ–°
- [ ] æ™ºèƒ½æ»‘ç‚¹å»ºè®®
- [ ] Gas è´¹ç”¨ä¼°ç®—
- [ ] é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- [ ] äº¤æ˜“è¿›åº¦æ˜¾ç¤º

### Phase 3: é«˜çº§åŠŸèƒ½
- [ ] è‡ªå®šä¹‰ä»·æ ¼åŒºé—´
- [ ] é«˜çº§è´¹ç”¨è®¾ç½®
- [ ] æµåŠ¨æ€§åˆ†æå·¥å…·
- [ ] å†å²æ”¶ç›Šå±•ç¤º
- [ ] æ‰¹é‡æ“ä½œæ”¯æŒ

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
**åˆ›å»ºæ—¥æœŸ**: 2025-10-10
**ç»´æŠ¤è€…**: CryptoStock å¼€å‘å›¢é˜Ÿ